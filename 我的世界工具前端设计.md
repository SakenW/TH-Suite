# 结论

* **定位**：单一“玩家向”本地工具，无专业术语；负责**扫描 → 差量同步 → 构建本地化产物**，不提供本地翻译编辑上传。
* **UI/技术基线**：**Ant Design** 为唯一组件库；“Minecraft 视觉皮肤”仅作轻量装饰（像素描边/方块化阴影/网格背景），不改变 AntD 交互规范。
* **项目归类**：同一整合包**版本/加载器升级**视为**同一项目的新组合**，在详情页切换；**项目页不暴露版本号**。
* **安全默认**：构建默认**旁路产物**；覆盖写回**双确认 + 必提示备份**；自动备份与回滚点。
* **同步口径**：只**上传服务器缺失**，只**拉取服务器已翻译/已审核且本地未覆盖/落后**的内容；同步时**语言多选**，默认勾选“本地已有语言”。

---

# Trans-Hub · MC 本地化客户端 UI/UX 规格说明（正式版）

## 1. 目标与范围

* **目标**：为玩家与轻技术用户提供“可视化、低心智负担”的 Minecraft 整合包/Mod 本地化流程，形成**扫描 → 同步 → 构建**的闭环。
* **范围**：

  * ✅ 本地扫描整合包/Mod，识别语言资源与词条；
  * ✅ 与服务器（Trans-Hub）做**差量对齐**：上传缺失、拉取可用翻译；
  * ✅ 构建本地化产物：**旁路产物（默认）/原地覆盖（双确认）**；
  * ✅ 浏览**本地已扫描**与**服务器可用**信息，查看**进度与统计**；
  * ✅ 弱网/离线容错、任务队列与失败重试、报告导出。
  * ❌ 不提供“本地翻译编辑上传”能力（避免污染服务器）。

## 2. 基本原则

* **玩家友好**：界面与文案“人话化”，隐藏工程参数与专业术语。
* **安全默认**：默认旁路产物；一切破坏性操作均需双确认并提示备份。
* **离线可用**：断网可操作，任务入队；联网后自动续传与重试。
* **一致与可预期**：所有页面的统计口径与状态词汇一致。
* **轻装饰重可用**：Minecraft 视觉元素只作点缀，不牺牲可读性与可达性。

## 3. 术语与口径

* **覆盖率**：能翻译的里，有多少已经翻译好了。
* **可拉取增量**：服务器上还有多少翻译，你本地还没用上。
* **专属覆盖**（Pack Override）：整合包自己写的优先翻译，会覆盖 Mod 默认显示。
* **跨包复用**：某个 Mod 在多个整合包里都被用到。
* **项目归类**：同一整合包的**版本/加载器**切换 = **同项目**下不同“组合”；升级**不新建项目**。

## 4. 信息架构与导航

### 4.1 主导航（左侧）

* 欢迎页
* 项目

  * 整合包（Pack）
  * MOD（Mod）
* 扫描中心
* 同步中心
* 构建中心
* 服务器状态
* 设置

### 4.2 顶部状态条（精简）

* **连接状态**：✅ 已连接 / ⛔ 离线
* **快速指标**：可拉取 X / 待上传 Y
* **时间**：上次扫描 12:30 · 上次同步 昨日

> 不显示延迟、鉴权细节、工程参数。

## 5. 页面规范

### 5.1 欢迎页

**模块**

* **主欢迎区**（工具介绍 + 与 Trans-Hub 的关系）

  * “这是一把‘找翻译—对齐服务器—拉回结果—生成本地化文件’的顺手小工具。”
  * “服务器（Trans-Hub）负责去重、审核、回传。你专心‘扫描→同步→构建’即可。”
* **快速入口**：

  * ① 新建项目并扫描（主按钮）
  * ② 重扫最近项目
  * ③ 去同步
  * ④ 去构建
* **最近任务**：最近一次扫描/同步/构建的状态 + 数量 + 体积（压缩前/后）+ 耗时
* **连接卡片**：在线/离线、服务器版本、可拉取/待上传简要计数

**空态引导**

* 三步引导卡：“选一个整合包或 MOD → 一键扫描 → 拉取翻译并生成本地化文件”。

---

### 5.2 项目页（整合包 / Mod 分开）

**共同规则**

* 顶部提供“基线切换”：`最近扫描` / `最新`（默认 `最近扫描`）；**不显示版本号**。
* 列表字段（简洁可懂）：

  * **整合包**：名称｜来源（Modrinth/CurseForge/本地）｜包含 Mod 数｜语言数｜词条数｜覆盖率｜上次扫描｜服务器摘要（可拉取/待上传）
  * **Mod**：名称｜来源｜被整合包引用次数｜语言数｜词条数｜覆盖率｜上次扫描｜服务器摘要
* 行内操作：进入详情 / 重扫 / 打开文件夹 / 服务器镜像浏览（只读）

**人性化**

* 列表上方显示汇总指标：整合包数、Mod 数、语言文件数、词条总数、平均覆盖率。

---

### 5.3 整合包详情（Pack Detail）

**页头**

* 名称、来源、路径（只读）、**版本/加载器选择器**（默认选择“本地已扫描组合”）
* 快捷：重扫 / 同步 / 构建 / 打开目录

**内容区**

* **概览卡**：包含 Mod 数、语言文件数、词条总数、覆盖率、专属覆盖词条数、上次扫描
* **版本与加载器**：切换后**过滤**：Mod 子集、覆盖率、专属覆盖词条计数
* **专属覆盖**：展示覆盖条数、涉及语言、最近变动
* **交叉视图**：显示“本包中 Mod 在其它整合包也出现”的次数与列表，可跳转
* **词条浏览**：**只读**统计与样例

**引导**

* 若选择了**未扫描的版本/加载器组合**，页顶黄色条提示：
  “这个组合还没扫过，去扫描一下就能看到对应内容。”（按钮直达扫描中心）

---

### 5.4 Mod 详情（Mod Detail）

* 页头：名称、来源、路径（只读）、**版本/加载器选择器**（默认本地已扫描）
* 概览：语言文件数、词条数、覆盖率、被多少整合包引用及列表（可跳转）
* 切换版本/加载器后，过滤文件与词条统计
* 词条浏览：**只读**统计与样例

---

### 5.5 扫描中心（必须先新建项目）

**入口卡片**

* 新建项目（整合包 / Mod）
* 重扫已有项目
* 继续最近项目

**新建向导**

1. 选择类型（整合包/Mod）
2. 选择路径或导入包（.mrpack/.zip）
3. 自动识别可用**版本/加载器组合**（默认勾选识别到的）
4. 开始扫描

**扫描过程**

* 进度条、剩余估算、可暂停/取消
* 错误项“跳过并记录”（不打断主流程）

**结果与留存**

* 显示：新增/变更/跳过/可疑；“服务器缺失（待上传）”摘要
* 保留“上次扫描结果”；支持导出报告（JSON/文本）

**规则**

* **同一整合包版本升级**：在**同项目**下新增“版本/加载器组合”并扫描；**不是新项目**。

---

### 5.6 同步中心（语言多选，默认本地语言）

**顶部**

* 语言多选：默认勾选“本地已有语言”；可额外勾选想要新增的语言

**双卡布局**

* **待上传（Push）**：仅服务器缺失；展示数量、压缩前/后体积、预计耗时；支持“只重试失败”
* **可拉取（Pull）**：按所选语言估算数量/体积/耗时；默认先 **Dry Run**（试运行）给出清单与估算，再执行

**文案**

* “待上传：你本地新发现的内容，服务器还没有。”
* “可拉取：服务器已有的翻译结果，你本地还没用上。”

**离线/失败处理**

* 断网任务入队，联网自动继续
* 失败任务单独列表，“只重试失败”一键操作

---

### 5.7 构建中心（安全第一）

**流程**

1. 选择目标（整合包/Mod）
2. 选择语言
3. 选择写回策略

   * **旁路产物（默认）**：输出到新文件夹（含时间戳），**不动原文件**
   * **原地覆盖**：需**双确认 + 必提示备份**（勾选“我已做好备份/同意覆盖”后按钮才可用）

**结果**

* 展示产物路径（可复制/一键打开）
* 差异摘要（新增/替换统计）
* 自动创建**回滚点**；支持“最近 N 次回滚”

**双确认弹窗（示例）**

* 第一步：“覆盖会替换原文件，建议先生成旁路产物并对比。”
* 第二步：复选框：“我已做好备份，同意覆盖。”

---

### 5.8 服务器状态

* **信号灯格**：Auth / Sync / Storage / DB / Queue（绿/黄/红）
* 一键连通性测试：只给**可用/不可用**结论（不显示延迟数值）
* 配额摘要：可拉取/待上传量级简表

---

### 5.9 设置（玩家可理解）

* 主题：暗 / 亮 / 自适应
* 备份与回滚：自动备份（开关）、回滚点保留数量（滑杆）
* 语言偏好：常用语言优先显示
* **不提供路径/限速选项**（数据库固定于应用目录，不可更改）

## 6. 通用交互规范

* **空态**：指向下一步操作的清晰按钮与一句话说明
* **加载**：Skeleton + 线性进度；长任务显示预计耗时
* **错误**：人话化的原因 + 一键重试；严重错误提供“复制诊断信息”
* **批量任务**：支持暂停/继续/取消；失败项集中重试
* **无障碍**：键盘可达、焦点可见、颜色对比度≥4.5；所有图标提供文本替代
* **提示色**：绿色=已就绪/可用；黄色=建议操作；红色=需要注意

## 7. 数据与状态模型（UI 视角）

* **实体**：

  * `Project`：type=pack|mod，path，sources（Modrinth/CurseForge/Local）
  * `Pack`：name，mods\[]，overrides（专属覆盖）
  * `Mod`：name，used\_by\_packs\[]
  * `File`：path，lang（en\_us/zh\_cn 等），segments\_count
  * `Segment`：key，source，target，lang，status
* **组合**：`(mc_version, loader)`；同一整合包的不同组合皆归属同一项目
* **段落状态**（只读展示）：`NEW_LOCAL`、`SERVER_MISSING`（待上传）、`REMOTE_AVAILABLE`（可拉取）、`REMOTE_NEWER`（远端更高版本）、`CONFLICT`、`ERROR`
* **任务状态**：`QUEUED / RUNNING / PAUSED / DONE / FAILED`
* **连接状态**：`ONLINE / OFFLINE`

## 8. 指标与口径（统一）

* 覆盖率 = 已翻译词条数 / 可翻译词条总数
* 可拉取增量 = 服务器已翻译且本地未覆盖词条数 / 本地未翻译词条数
* 体积估算：压缩前/后（单位 MB），基于 Dry Run 的清单统计

## 9. 用户旅程（流程图）

```mermaid
flowchart LR
  A[欢迎页: 新建/重扫/去同步/去构建] --> B[项目页: 选择整合包/Mod]
  B --> C[详情页: 选择版本/加载器组合]
  C --> D[扫描中心: 扫描/重扫/新增组合]
  D --> E{差量判定}
  E -->|服务器缺失| F[同步中心: 待上传(Dry Run→Push)]
  E -->|服务器可用| G[同步中心: 可拉取(Dry Run→Pull)]
  F --> H[构建中心: 旁路产物(默认)/原地覆盖(双确认)]
  G --> H
  H --> I[产物与报告: 路径/差异摘要/回滚点]
```

## 10. 视觉与风格（概述）

* **Ant Design 5**：遵循其组件与交互规范；主题 Token 控色
* **Minecraft 皮肤**：像素描边、方块化阴影、网格背景；用于卡片标题、徽章与背景装饰；**强度可控**，不影响可读性
* **主题**：暗/亮/自适应；玩家可在设置中切换

## 11. 性能与容量（目标线）

* 首屏交互可用 ≤ 2s（本地）
* 列表虚拟滚动 ≥ 10 万行平滑（服务端分页/筛选/排序）
* 长任务 UI 不阻塞主线程，进度更新 ≥ 每 150ms 一次
* Dry Run 与实际传输的数量/体积误差可控（≤ 5%）

## 12. 安全与回滚

* 默认**旁路产物**；**原地覆盖**需双确认并提示备份
* 自动创建回滚点（时间戳命名），保留数量可在设置调节
* 覆盖前**预检**：将替换文件数/词条数，标记高风险文件（被多个整合包共享）

## 13. 离线与失败重试

* 断网：任务入队；联网后自动继续
* 失败：指数退避重试；提供“只重试失败”一键操作
* 所有长任务支持日志导出（JSON/文本）

## 14. 可观测与报告

* 三类报告：扫描 / 同步 / 构建（均含数量、体积、耗时、错误明细）
* 顶部状态条与页面指标一致；不可出现“跳数”或未同步刷新
* 错误可“复制诊断信息”

## 15. 接口对接（字段映射要点）

* **扫描结果**：`{ project_id, combos: [{mc_version, loader}], files: [{path, lang, segments}], stats: {...} }`
* **差量摘要**：`{ to_upload: {segments, bytes_raw, bytes_zip}, to_pull: {segments, bytes_raw, bytes_zip} }`
* **同步执行**：`/sync/push`、`/sync/pull` 支持 `dry_run=true`；返回清单与估算
* **构建执行**：`{ target_type: "pack|mod", target_id, languages: [], strategy: "bypass|inplace" }`，结果含产物路径与差异摘要

> 以上为前端字段对齐要点，实际以后端契约为准；口径必须保证与 UI 指标一致。

## 16. 验收标准（Checklist）

* [ ] “版本升级=同项目新组合”在项目/详情/扫描/同步/构建表现一致
* [ ] 项目页默认不显示版本号；详情页切换能正确过滤并刷新统计
* [ ] 同步中心**语言多选**对 Dry Run 与执行结果的数量/体积口径一致
* [ ] 覆盖写回必须触发**双确认 + 备份提示**；默认旁路产物
* [ ] 断网→任务入队→联网自动继续；“只重试失败”可用
* [ ] 任何页面无专业术语与工程参数；文案“人话化”
* [ ] 报告可导出；错误信息可复制；无“跳数”与不同步刷新

---

**说明**：本说明书为直接落地的 UI/UX 规范，可作为设计评审与前端实现的统一基线。若需要，我可继续输出**逐页交互稿 + 组件映射 + 字段与文案表**，用于设计与开发的日常对齐。
