# MC L10n 前端功能完善任务清单

## 项目目标
将前端从模拟数据切换到真实后端 API，实现完整的扫描→数据库→展示功能流程。

## 任务详细拆解

### 🔍 Phase 1: API 分析和服务层实现

#### 1.1 后端 API 结构分析
- [x] 分析主要 API 路由结构
  - `/api/v1/scan` - 扫描管理 (传统API)
  - `/api/v6/*` - V6架构API (现代化接口)
- [ ] 详细分析扫描相关接口
  - 扫描请求格式和参数
  - 进度查询机制
  - 结果获取接口
- [ ] 分析数据库和实体接口
  - 模组(mods)管理
  - 整合包(packs)管理
  - 语言文件(language_files)管理
  - 翻译(translations)管理

#### 1.2 前端 API 服务层重构
- [ ] 创建 `services/api/` 目录结构
- [ ] 实现基础 HTTP 客户端 (`BaseApiClient`)
- [ ] 实现各领域 API 服务类：
  - `ScanApiService` - 扫描功能
  - `ProjectApiService` - 项目管理
  - `ModApiService` - 模组管理
  - `TranslationApiService` - 翻译管理
- [ ] 配置 API 端点和错误处理

### 🎯 Phase 2: 核心功能页面实现

#### 2.1 扫描页面完善
- [ ] 重构 `ScanPage` 连接真实 API
- [ ] 实现目录选择功能（Tauri 文件选择器）
- [ ] 实现扫描进度实时显示
- [ ] 添加扫描结果展示和数据验证
- [ ] 实现增量扫描和全量扫描切换

#### 2.2 项目管理页面
- [ ] 完善 `ProjectsPacksPage` (整合包项目)
- [ ] 完善 `ProjectsModsPage` (MOD项目)
- [ ] 实现项目创建、编辑、删除功能
- [ ] 添加项目状态和统计信息展示

#### 2.3 数据展示页面
- [ ] 实现语言文件浏览器
- [ ] 添加翻译进度可视化
- [ ] 创建数据库统计仪表板
- [ ] 实现搜索和过滤功能

### 🗄️ Phase 3: 数据库集成和状态管理

#### 3.1 Store 状态管理重构
- [ ] 重构 `appStore` 连接真实 API
- [ ] 实现数据缓存和同步机制
- [ ] 添加离线状态处理
- [ ] 优化状态更新和订阅机制

#### 3.2 实时数据同步
- [ ] 实现 WebSocket 连接（如果后端支持）
- [ ] 添加轮询机制获取实时状态
- [ ] 实现数据一致性检查
- [ ] 添加数据同步错误恢复

### 🧪 Phase 4: 真实环境测试

#### 4.1 本地测试环境搭建
- [ ] 准备测试用 Minecraft 模组文件
- [ ] 配置后端数据库连接
- [ ] 设置开发环境 API 代理
- [ ] 创建测试数据种子脚本

#### 4.2 功能集成测试
- [ ] 端到端扫描流程测试
- [ ] 数据库写入和查询测试
- [ ] 错误场景和边界条件测试
- [ ] 性能和并发测试

#### 4.3 用户体验优化
- [ ] 添加加载状态和进度指示器
- [ ] 实现友好的错误提示和处理
- [ ] 优化长时间操作的用户反馈
- [ ] 添加操作确认和撤销机制

### 🔧 Phase 5: 生产就绪优化

#### 5.1 错误处理和监控
- [ ] 实现全局错误边界和处理
- [ ] 添加 API 请求重试机制
- [ ] 实现日志记录和错误上报
- [ ] 添加性能监控和分析

#### 5.2 安全和验证
- [ ] 实现 API 认证和授权
- [ ] 添加输入验证和清理
- [ ] 实现敏感数据保护
- [ ] 添加 CSRF 和 XSS 防护

#### 5.3 部署和配置
- [ ] 配置生产环境 API 端点
- [ ] 优化构建配置和资源加载
- [ ] 添加环境变量配置管理
- [ ] 实现健康检查和监控端点

## 技术栈和工具

### 前端技术
- **框架**: React 19 + TypeScript
- **状态管理**: Zustand
- **UI 组件**: Ant Design 5 + Tailwind CSS
- **HTTP 客户端**: Axios
- **路由**: React Router 6
- **动画**: Framer Motion
- **桌面集成**: Tauri 2

### 后端集成
- **API 版本**: V6 架构 + V1 兼容
- **协议**: REST API + WebSocket (可选)
- **数据格式**: JSON + NDJSON
- **压缩**: Zstd + 智能压缩
- **数据库**: SQLite/SQLCipher

## 成功标准

### 功能标准
- [x] 前端能成功连接后端 API
- [ ] 扫描功能完全正常工作
- [ ] 数据能正确写入和读取数据库
- [ ] 实时进度和状态更新正常
- [ ] 错误处理和用户反馈友好

### 性能标准
- [ ] 扫描大型整合包 (<5分钟)
- [ ] 界面响应时间 (<200ms)
- [ ] 数据库查询优化 (<1秒)
- [ ] 内存使用合理 (<500MB)

### 质量标准
- [ ] TypeScript 类型检查通过
- [ ] 代码覆盖率 >80%
- [ ] 无严重安全漏洞
- [ ] 用户体验流畅自然

## 当前进度
- [x] Tailwind CSS 和 Minecraft 主题优化完成
- [x] 前端构建环境验证通过
- [🔄] 正在进行：后端 API 结构分析
- [ ] 待开始：API 服务层实现

## 备注
- 优先实现扫描功能，这是核心功能
- 保持现有的 Minecraft 主题和响应式设计
- 确保向后兼容和平滑升级路径