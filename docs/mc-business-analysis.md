# Minecraft 本地化业务分析文档

**创建日期**: 2025年8月30日  
**Phase**: 2.1 - MC业务领域分析与模型设计  
**状态**: 正在分析  

## 📋 目录
1. [现有MC本地化工作流程](#现有MC本地化工作流程)
2. [模组翻译典型场景](#模组翻译典型场景)
3. [核心业务概念定义](#核心业务概念定义)
4. [业务流程图](#业务流程图)
5. [技术约束与挑战](#技术约束与挑战)

---

## 📖 现有MC本地化工作流程

### 典型的MC模组本地化流程

#### 🚀 阶段1：项目准备
1. **模组获取**
   - 下载目标模组的JAR文件
   - 或获取模组的源代码文件夹
   - 确认模组版本和MC版本兼容性

2. **结构分析** 
   - 解压/扫描JAR文件内容
   - 定位语言文件位置 (`assets/[modid]/lang/`)
   - 识别模组ID和基本信息 (`mcmod.info`, `mods.toml`)
   - 分析依赖模组关系

#### 📝 阶段2：文本提取与整理  
1. **语言文件提取**
   - 提取英文原版文件 (`en_us.json`)
   - 查找其他已有语言版本
   - 分析翻译键的结构和模式

2. **内容分类**
   - **物品名称** (`item.modid.itemname`)
   - **方块名称** (`block.modid.blockname`) 
   - **界面文本** (`gui.modid.buttontext`)
   - **提示信息** (`tooltip.modid.description`)
   - **成就/进度** (`advancement.modid.achievementname`)
   - **配置选项** (`config.modid.optionname`)

#### 🌐 阶段3：翻译工作
1. **翻译管理**
   - 分配翻译任务给团队成员
   - 使用翻译记忆和术语库
   - 保持翻译一致性和质量

2. **上下文理解**
   - 在游戏中查看原文效果
   - 理解游戏机制和背景
   - 考虑字符长度限制

#### ✅ 阶段4：测试与发布
1. **集成测试**
   - 将翻译文件打包回JAR或生成语言包
   - 在游戏中测试显示效果
   - 检查格式化字符串和占位符

2. **版本管理**
   - 跟踪模组版本更新
   - 同步新增内容的翻译
   - 维护历史版本兼容性

---

## 🎮 模组翻译典型场景

### 场景1：大型内容模组 (如工业/魔法模组)
**特点**:
- 翻译条目数量: 500-2000+
- 复杂的游戏机制术语
- 多层级的GUI界面
- 详细的物品描述和教程

**挑战**:
- 专业术语的统一翻译
- 长文本的排版问题
- 版本更新频繁

**示例模组**: Applied Energistics 2, Thermal Expansion

### 场景2：装饰/建筑模组
**特点**:
- 翻译条目数量: 100-500
- 主要是物品和方块名称
- 颜色/材质变体很多
- 简单但需要创意的命名

**挑战**:
- 大量相似物品的差异化命名
- 保持命名的一致性和美观

**示例模组**: Chisel, Decocraft

### 场景3：实用工具模组
**特点**:
- 翻译条目数量: 50-200  
- 主要是GUI和配置文本
- 功能性描述较多
- 键位绑定和操作说明

**挑战**:
- 准确传达功能描述
- 操作说明的本地化

**示例模组**: JEI, WAILA, JourneyMap

### 场景4：资源包 (Resource Pack)
**特点**:
- 翻译Minecraft原版内容
- 或为模组提供材质+翻译
- 可能包含自定义字体
- 需要pack.mcmeta配置

**挑战**:
- 与模组版本的同步
- 多版本MC的兼容性

---

## 📚 核心业务概念定义

### 🏗 基础概念

#### 1. **Mod (模组)**
- **定义**: Minecraft的功能扩展包，通常以JAR文件形式分发
- **标识**: 通过ModID唯一标识 (如 `thermalexpansion`, `appliedenergistics2`)
- **版本**: 有自己的版本号，依赖特定的Minecraft和ModLoader版本
- **结构**: 包含代码、资源、语言文件等

#### 2. **Resource Pack (资源包)**  
- **定义**: 替换游戏资源的包，可包含材质、模型、语言文件等
- **用途**: 纯视觉/语言改动，不改变游戏逻辑
- **结构**: 与模组类似但无代码逻辑

#### 3. **Translation Key (翻译键)**
- **定义**: 游戏内文本的唯一标识符
- **格式**: `category.modid.identifier` (如 `item.thermal.machine_frame`)
- **类型**: item, block, gui, tooltip, config等
- **作用**: 连接代码中的文本引用与实际显示文本

#### 4. **Language File (语言文件)**
- **定义**: 存储翻译键值对的JSON文件  
- **命名**: 按语言代码命名 (如 `en_us.json`, `zh_cn.json`)
- **位置**: `assets/[modid]/lang/` 目录下
- **格式**: `{"translation.key": "显示文本"}`

#### 5. **Translation Project (翻译项目)**
- **定义**: 一个完整的本地化工作单元
- **范围**: 可包含一个或多个模组的翻译
- **管理**: 包含进度跟踪、版本管理、团队协作等
- **输出**: 生成可用的语言文件或资源包

### 🔗 关系概念

#### 1. **Mod Dependency (模组依赖)**
- **定义**: 模组之间的依赖关系
- **类型**: 必需依赖、可选依赖、版本要求
- **影响**: 影响翻译内容的完整性和一致性

#### 2. **Translation Memory (翻译记忆)**
- **定义**: 历史翻译的数据库，用于提供翻译建议
- **匹配**: 基于翻译键或文本内容的模糊匹配
- **复用**: 提高翻译效率和一致性

#### 3. **Terminology (术语库)**
- **定义**: 专业术语的标准翻译对照表
- **范围**: 跨模组的通用术语 (如 "Energy", "Machine", "Recipe")
- **管理**: 支持术语的增加、修改和验证

---

## 🔄 业务流程图

### 主要业务流程

```
📁 项目创建
    ↓
🔍 模组扫描 → 📋 结构分析 → 🗂 文件索引
    ↓
📝 文本提取 → 🔤 翻译键解析 → 📊 统计分析  
    ↓
🌐 翻译工作 → 💭 翻译记忆匹配 → ✍️ 人工翻译
    ↓
✅ 质量检查 → 🎯 格式验证 → 🎮 游戏内测试
    ↓  
📦 打包输出 → 🚀 部署发布 → 🔄 版本更新
```

### 并行工作流程

```
主流程: 项目 → 扫描 → 提取 → 翻译 → 输出
                ↓
支持流程1: 术语管理 → 术语匹配 → 一致性检查
                ↓
支持流程2: 版本跟踪 → 变更检测 → 增量翻译  
                ↓
支持流程3: 团队协作 → 任务分配 → 进度同步
```

---

## ⚠️ 技术约束与挑战

### 🔧 技术约束

#### 1. **文件格式多样性**
- **JSON格式**: 现代模组主流，MC 1.13+
- **Properties格式**: 老版本模组，MC 1.12-
- **自定义格式**: 某些模组使用特殊格式

#### 2. **版本兼容性**  
- **Minecraft版本**: 1.7.10, 1.12.2, 1.16.5, 1.18.2, 1.20.x等
- **ModLoader差异**: Forge, Fabric, Quilt不同的文件结构
- **语言代码变更**: 从`zh_CN`到`zh_cn`的历史变更

#### 3. **文本动态性**
- **格式化字符串**: `%s`, `%d`, `{0}`, `{player}`等占位符
- **复数形式**: 英文单复数 vs 中文无复数变化
- **颜色代码**: `§a绿色文本§r` 等MC格式代码

### 🎯 业务挑战

#### 1. **翻译质量控制**
- **上下文缺失**: 翻译键名称可能不够清晰
- **字符长度限制**: GUI空间限制
- **专业术语统一**: 跨模组术语一致性

#### 2. **工作流程管理** 
- **版本同步**: 模组更新时的翻译同步
- **团队协作**: 多人同时翻译的冲突处理
- **进度跟踪**: 翻译完成度的准确统计

#### 3. **技术集成复杂性**
- **Trans-Hub集成**: 与云端翻译平台的数据同步
- **多平台支持**: 不同操作系统的兼容性
- **性能优化**: 大型模组包的处理速度

---

## 📈 业务需求总结

### 核心功能需求
1. **智能扫描与解析** - 自动识别和处理各种模组格式
2. **翻译工作台** - 高效的翻译编辑界面
3. **质量保证系统** - 自动检查和验证机制  
4. **版本管理** - 跟踪和同步模组版本变更
5. **团队协作** - 支持多人协作翻译

### 非功能需求
1. **性能** - 快速处理大型模组包
2. **可靠性** - 稳定的数据存储和备份
3. **易用性** - 直观的用户界面和操作流程
4. **扩展性** - 支持新模组类型和格式

---

**下一步**: 基于这个业务分析，开始设计MC核心领域模型，将业务概念转化为代码实体。